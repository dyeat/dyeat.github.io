---
layout: post
title: "HTTP頭欄位"
date: 2018-12-17 22:10:36 +0800
categories: [web]
tags: [web]
---

**HTTP頭欄位**（英語：HTTP header fields）是指在[超文字傳輸協定](https://www.wikiwand.com/zh-tw/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE)（HTTP）的請求和回應訊息中的訊息頭部分。它們定義了一個超文字傳輸協定事務中的操作參數。HTTP頭部欄位可以自己根據需要定義，因此可能在 Web 伺服器和瀏覽器上發現非標準的頭欄位。

### 基本格式
協定頭的欄位，是在請求（request）或回應（response）行（一條訊息的第一行內容）之後傳輸的。協定頭的欄位是以明文的字串格式傳輸，是以冒號分隔的鍵名與鍵值對，以Enter(CR)加換行(LF)符號序列結尾。協定頭部分的結尾以一個空白欄位標識，結果就是，也就是傳輸兩個連續的CR+LF。在歷史上，很長的行曾經可能以多個短行的形式傳輸；在下一行的開頭，輸出一個空格(SP)或者一個水平制表符(HT)，表示它是一個後續行。在如今，這種換行形式已經被廢棄[1]。

### 類型
HTTP 頭欄位根據實際用途被分為以下 4 種類型：

- 通用頭欄位(英語：General Header Fields)
- 請求頭欄位(英語：Request Header Fields)
- 回應頭欄位(英語：Response Header Fields)
- 實體頭欄位(英語：Entity Header Fields)

### 欄位名
在 [RFC 7230](https://tools.ietf.org/html/rfc7230)、[RFC 7231](https://tools.ietf.org/html/rfc7231)、[RFC 7232](https://tools.ietf.org/html/rfc7232)、[RFC 7233](https://tools.ietf.org/html/rfc7233)、[RFC 7234](https://tools.ietf.org/html/rfc7234) 和 [RFC 7235](https://tools.ietf.org/html/rfc7235) 中，對一組核心欄位進行了標準化。有一份對於這些欄位的官方的登記冊，以及 一系列的補充規範 ，由網際網路號碼分配局（IANA）維護。各個應用程式也可以自行定義額外的欄位名字及相應的值。[頭欄位的永久登記表](http://www.iana.org/assignments/message-headers/message-headers.xml#perm-headers)和[臨時登記表](http://www.iana.org/assignments/message-headers/message-headers.xml#prov-headers)目前由[IANA](https://www.wikiwand.com/zh-tw/IANA)維護。其他的欄位名稱和允許的值可以由各應用程式定義。

按照慣例，非標準的協定頭欄位是在欄位名稱前加上X-字首來標識。但這一慣例已在2012年6月被廢棄，因為按照這種慣例，非標準欄位變成標準欄位時會引起很多不方便之處。以前曾經有的使用Downgraded-的限制也在2013年3月被解除。


### 欄位值
某些欄位中可以包含注釋內容（例如User-Agent、Server和Via欄位中)，這些注釋內容可由應用程式忽略。

很多欄位的值中可以包含帶有權重的品質（quality，常被簡稱為Q）的鍵值對，指定的「重量」會在內容協商的過程中使用

### 大小限制
標準中沒有對每個協定頭欄位的名稱和值的大小設定任何限制，也沒有限制欄位的個數。<br />
然而，出於實際場景及安全性的考慮，大部分的伺服器、用戶端和代理軟體都會實施一些限制。<br />
例如，Apache 2.3伺服器在預設情況下限制每個欄位的大小不得超過**8190位元組**，同時，單個請求中最多有100個頭欄位

### 請求欄位
<table>
   <tr>
      <td></td>
   </tr>
   <tr>
      <td>協定頭欄位名</td>
      <td>說明</td>
      <td>範例</td>
      <td>狀態</td>
   </tr>
   <tr>
      <td>Accept</td>
      <td>能夠接受的回應內容類型（Content-Types）。參見內容協商。</td>
      <td>Accept: text/plain</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Accept-Charset</td>
      <td>能夠接受的字元集</td>
      <td>Accept-Charset: utf-8</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Accept-Encoding</td>
      <td>能夠接受的編碼方式列表。參考HTTP壓縮。</td>
      <td>Accept-Encoding: gzip, deflate</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Accept-Language</td>
      <td>能夠接受的回應內容的自然語言列表。參考 內容協商 。</td>
      <td>Accept-Language: en-US</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Accept-Datetime</td>
      <td>能夠接受的按照時間來表示的版本</td>
      <td>Accept-Datetime: Thu, 31 May 2007 20:35:00 GMT</td>
      <td>臨時</td>
   </tr>
   <tr>
      <td>Authorization</td>
      <td>用於超文字傳輸協定的認證的認證資訊</td>
      <td>Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Cache-Control</td>
      <td>用來指定在這次的請求/回應鏈中的所有快取機制 都必須 遵守的指令</td>
      <td>Cache-Control: no-cache</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Connection</td>
      <td>該瀏覽器想要優先使用的連接類型</td>
   </tr>
   <tr>
      <td>[8]</td>
   </tr>
   <tr>
      <td></td>
   </tr>
   <tr>
      <td>Connection: keep-alive</td>
   </tr>
   <tr>
      <td>Connection: Upgrade</td>
   </tr>
   <tr>
      <td></td>
   </tr>
   <tr>
      <td>常設</td>
   </tr>
   <tr>
      <td>Cookie</td>
      <td>之前由伺服器通過 Set- Cookie （下文詳述）傳送的一個 超文字傳輸協定Cookie</td>
      <td>Cookie: $Version=1; Skin=new;</td>
      <td>常設: 標準</td>
   </tr>
   <tr>
      <td>Content-Length</td>
      <td>以 八位位元組陣列 （8位元的位元組）表示的請求體的長度</td>
      <td>Content-Length: 348</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Content-MD5</td>
      <td>請求體的內容的二進位 MD5 雜湊值，以 Base64 編碼的結果</td>
      <td>Content-MD5: Q2hlY2sgSW50ZWdyaXR5IQ==</td>
      <td>過時的[9]</td>
   </tr>
   <tr>
      <td>Content-Type</td>
      <td>請求體的 多媒體類型 （用於POST和PUT請求中）</td>
      <td>Content-Type: application/x-www-form-urlencoded</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Date</td>
      <td>傳送該訊息的日期和時間(按照 RFC 7231 中定義的"超文字傳輸協定日期"格式來傳送)</td>
      <td>Date: Tue, 15 Nov 1994 08:12:31 GMT</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Expect</td>
      <td>表明用戶端要求伺服器做出特定的行為</td>
      <td>Expect: 100-continue</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>From</td>
      <td>發起此請求的用戶的郵件位址</td>
      <td>From: user@example.com</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Host</td>
      <td>伺服器的域名(用於虛擬主機 )，以及伺服器所監聽的傳輸控制協定埠號。如果所請求的埠是對應的服務的標準埠，則埠號可被省略。</td>
   </tr>
   <tr>
      <td>[10] 自超檔案傳輸協定版本1.1（HTTP/1.1）開始便是必需欄位。</td>
   </tr>
   <tr>
      <td></td>
   </tr>
   <tr>
      <td>Host: en.wikipedia.org:80</td>
   </tr>
   <tr>
      <td>Host: en.wikipedia.org</td>
   </tr>
   <tr>
      <td></td>
   </tr>
   <tr>
      <td>常設</td>
   </tr>
   <tr>
      <td>If-Match</td>
      <td>僅當用戶端提供的實體與伺服器上對應的實體相符合時，才進行對應的操作。主要作用時，用作像 PUT 這樣的方法中，僅當從用戶上次更新某個資源以來，該資源未被修改的情況下，才更新該資源。</td>
      <td>If-Match: "737060cd8c284d8af7ad3082f209582d"</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>If-Modified-Since</td>
      <td>允許在對應的內容未被修改的情況下返回304未修改（ 304 Not Modified ）</td>
      <td>If-Modified-Since: Sat, 29 Oct 1994 19:43:31 GMT</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>If-None-Match</td>
      <td>允許在對應的內容未被修改的情況下返回304未修改（ 304 Not Modified ），參考 超文字傳輸協定 的實體標記</td>
      <td>If-None-Match: "737060cd8c284d8af7ad3082f209582d"</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>If-Range</td>
      <td>如果該實體未被修改過，則向我傳送我所缺少的那一個或多個部分；否則，傳送整個新的實體</td>
      <td>If-Range: "737060cd8c284d8af7ad3082f209582d"</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>If-Unmodified-Since</td>
      <td>僅當該實體自某個特定時間已來未被修改的情況下，才傳送回應。</td>
      <td>If-Unmodified-Since: Sat, 29 Oct 1994 19:43:31 GMT</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Max-Forwards</td>
      <td>限制該訊息可被代理及閘道器轉發的次數。</td>
      <td>Max-Forwards: 10</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Origin</td>
      <td>發起一個針對 跨來源資源共用 的請求（要求伺服器在回應中加入一個『存取控制-允許來源』（'Access-Control-Allow-Origin'）欄位）。</td>
      <td>Origin: http://www.example-social-network.com</td>
      <td>常設: 標準</td>
   </tr>
   <tr>
      <td>Pragma</td>
      <td>與具體的實現相關，這些欄位可能在請求/回應鏈中的任何時候產生多種效果。</td>
      <td>Pragma: no-cache</td>
      <td>常設但不常用</td>
   </tr>
   <tr>
      <td>Proxy-Authorization</td>
      <td>用來向代理進行認證的認證資訊。</td>
      <td>Proxy-Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Range</td>
      <td>僅請求某個實體的一部分。位元組偏移以0開始。參見位元組服務。</td>
      <td>Range: bytes=500-999</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Referer [sic] [11]</td>
      <td>表示瀏覽器所存取的前一個頁面，正是那個頁面上的某個連結將瀏覽器帶到了當前所請求的這個頁面。</td>
      <td>Referer: http://en.wikipedia.org/wiki/Main_Page</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>TE</td>
      <td>瀏覽器預期接受的傳輸編碼方式：可使用回應協定頭 Transfer-Encoding 欄位中的值；另外還可用"trailers"（與"分塊 "傳輸方式相關）這個值來表明瀏覽器希望在最後一個尺寸為0的塊之後還接收到一些額外的欄位。</td>
      <td>TE: trailers, deflate</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>User-Agent</td>
      <td>瀏覽器的瀏覽器身分標識字串</td>
      <td>User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:12.0) Gecko/20100101 Firefox/21.0</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Upgrade</td>
      <td>要求伺服器更新到另一個協定。</td>
      <td>Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Via</td>
      <td>向伺服器告知，這個請求是由哪些代理髮出的。</td>
      <td>Via: 1.0 fred, 1.1 example.com (Apache/1.1)</td>
      <td>常設</td>
   </tr>
   <tr>
      <td>Warning</td>
      <td>一個一般性的警告，告知，在實體內容體中可能存在錯誤。</td>
      <td>Warning: 199 Miscellaneous warning</td>
      <td>常設</td>
   </tr>
   <tr>
      <td></td>
   </tr>
</table>